!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s="./client/bundles/index/index.js")}({"./client/bundles/index/components/QuestionBox.js":
/*!********************************************************!*\
  !*** ./client/bundles/index/components/QuestionBox.js ***!
  \********************************************************/
/*! no static exports found */function(e,n,t){"use strict";var i,o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(/*! newsha */"./node_modules/newsha/lib/index.js");(i=r)&&i.__esModule;var a=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.questionBox=document.querySelector(".question-box"),this.chatBox=document.querySelector(".chat-box"),this.mainTitle=document.querySelector(".question-box > .title"),this.newsha=new Newsha({lang:"en"}),this.newsha.isActive=!1,this.isTypingMode=!1,this.canType=!1,this.isTyping=!1,this.initNewsha(),this.init()}return o(e,[{key:"initNewsha",value:function(){var e=this;this.newsha.any(this.onResult.bind(this)),this.newsha.command("alireza",function(n){e.isTyping||e.isTypingMode||e.canType||e.enableTypingMode()})}},{key:"init",value:function(){var e=this;this.questionBox.onclick=function(){e.isTyping||(e.newsha.isActive||(e.newsha.listen(),e.newsha.isActive=!0),e.toggleTypingMode())}}},{key:"toggleTypingMode",value:function(){this.isTypingMode?this.disableTypingMode():this.enableTypingMode()}},{key:"enableTypingMode",value:function(){this.isTypingMode=!0,this.canType=!0,this.mainTitle.innerHTML="[Say something]",this.questionBox.classList.add("typing-mode")}},{key:"disableTypingMode",value:function(){this.isTypingMode=!1,this.canType=!1,this.mainTitle.innerHTML="Ask me questions",this.questionBox.classList.remove("typing-mode")}},{key:"onResult",value:function(e){this.canType&&this.type(e)}},{key:"type",value:function(e){var n=this;return new Promise(function(t){var i=e.split(" "),o=0;n.canType=!1,n.isTyping=!0;for(var r=function(e){0===e&&(n.mainTitle.innerHTML=""),o+=Math.floor(200*Math.random())+100,setTimeout(function(){n.mainTitle.innerHTML+=i[e]+" "},o)},a=0;a<i.length;a++)r(a);setTimeout(function(){n.isTyping=!1,n.throwTextToChatBox(e)},o+500)})}},{key:"throwTextToChatBox",value:function(e){var n=this;this.mainTitle.innerHTML="";var t=document.createElement("p");this.questionBox.offsetTop,this.chatBox.offsetHeight,this.questionBox.offsetLeft;t.classList.add("user"),t.innerHTML=e,this.chatBox.appendChild(t),setTimeout(function(){n.disableTypingMode()},500)}}]),e}();e.exports=a},"./client/bundles/index/index.js":
/*!***************************************!*\
  !*** ./client/bundles/index/index.js ***!
  \***************************************/
/*! no static exports found */function(e,n,t){"use strict";var i,o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(/*! ./components/QuestionBox */"./client/bundles/index/components/QuestionBox.js"),a=(i=r)&&i.__esModule?i:{default:i};var s=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.questionBox=new a.default}return o(e,[{key:"onLoad",value:function(){document.body.classList.add("ready")}}]),e}());window.onload=function(){return s.onLoad()}},"./node_modules/leven/index.js":
/*!*************************************!*\
  !*** ./node_modules/leven/index.js ***!
  \*************************************/
/*! no static exports found */function(e,n,t){"use strict";var i=[],o=[];e.exports=function(e,n){if(e===n)return 0;var t=e;e.length>n.length&&(e=n,n=t);var r=e.length,a=n.length;if(0===r)return a;if(0===a)return r;for(;r>0&&e.charCodeAt(~-r)===n.charCodeAt(~-a);)r--,a--;if(0===r)return a;for(var s,l,c,u,f=0;f<r&&e.charCodeAt(f)===n.charCodeAt(f);)f++;if(a-=f,0===(r-=f))return a;for(var h=0,d=0;h<r;)o[f+h]=e.charCodeAt(f+h),i[h]=++h;for(;d<a;)for(s=n.charCodeAt(f+d),c=d++,l=d,h=0;h<r;h++)u=s===o[f+h]?c:c+1,c=i[h],l=i[h]=c>l?u>l?l+1:u:u>c?c+1:u;return l}},"./node_modules/newsha/lib/index.js":
/*!******************************************!*\
  !*** ./node_modules/newsha/lib/index.js ***!
  \******************************************/
/*! no static exports found */function(e,n,t){"use strict";var i,o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(/*! similarity */"./node_modules/similarity/index.js"),a=(i=r)&&i.__esModule?i:{default:i};String.prototype.faOptimize=function(){return this.replace(/ص/g,"س").replace(/ث/g,"س").replace(/ظ/g,"ز").replace(/ذ/g,"ز").replace(/ض/g,"ز").replace(/ط/g,"ت").replace(/ح/g,"ه").replace(/غ/g,"ق")};var s=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.commands=[],this.collections={},this.minimumConfidence=.4,this.config=n,this.anyListeners=[],this.recognition=new(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition),this.recognition.lang=n.lang||"fa",this.recognition.continuous=n.continuous||!1,this.recognition.onresult=this.onResult.bind(this),this.recognition.onend=this.onEnd.bind(this)}return o(e,[{key:"onResult",value:function(e){var n="",t=!0,i=!1,o=void 0;try{for(var r,a=e.results[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){n+=r.value[0].transcript}}catch(e){i=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw o}}var s=!0,l=!1,c=void 0;try{for(var u,f=this.anyListeners[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){(0,u.value)(n)}}catch(e){l=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(l)throw c}}this.checkResults(n)}},{key:"onEnd",value:function(){this.listen()}},{key:"checkSingleCommand",value:function(e,n){var t=0,i=(e=e.trim()).indexOf("{");if(-1!==i){var o=e.indexOf("}"),r=e.substr(i+1,o-i-1),s=null,l=0,c=!0,u=!1,f=void 0;try{for(var h,d=this.collections[r][Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var y=h.value;t=0;var v=!0,m=!1,p=void 0;try{for(var g,w=n.split(" ")[Symbol.iterator]();!(v=(g=w.next()).done);v=!0){var x=g.value;t=Math.max((0,a.default)(x.faOptimize(),y.name.faOptimize()),t)}}catch(e){m=!0,p=e}finally{try{!v&&w.return&&w.return()}finally{if(m)throw p}}l<t&&(l=t,s=y)}}catch(e){u=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(u)throw f}}return{collectionName:r,data:s,confidence:l,isTrue:l>=this.minimumConfidence}}var b=!0,T=!1,k=void 0;try{for(var M,C=n.split(" ")[Symbol.iterator]();!(b=(M=C.next()).done);b=!0){var S=M.value;t=Math.max((0,a.default)(S.faOptimize(),e.faOptimize()),t)}}catch(e){T=!0,k=e}finally{try{!b&&C.return&&C.return()}finally{if(T)throw k}}return{confidence:t,isTrue:t>=this.minimumConfidence}}},{key:"checkResults",value:function(e){var n=!0,t=!1,i=void 0;try{for(var o,r=this.commands[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var a=o.value,s={command:a.command,transcript:e,collections:{}},l=!0,c=0,u=a.command.split("&&"),f=!0,h=!1,d=void 0;try{for(var y,v=u[Symbol.iterator]();!(f=(y=v.next()).done);f=!0){var m=y.value,p=this.checkSingleCommand(m,e);l=l&&p.isTrue,c+=p.confidence,p.data&&(s.collections[p.collectionName]=p.data.value)}}catch(e){h=!0,d=e}finally{try{!f&&v.return&&v.return()}finally{if(h)throw d}}c/=u.length,s.confidence=c,l&&a.callback(s)}}catch(e){t=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(t)throw i}}}},{key:"command",value:function(e,n){this.commands.push({command:e,callback:n})}},{key:"collection",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};this.collections[e]=[];var i=!0,o=!1,r=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;this.collections[e].push({name:l,value:t(l)})}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return this.collections[e]}},{key:"any",value:function(e){this.anyListeners.push(e)}},{key:"listen",value:function(){this.recognition.start()}},{key:"stop",value:function(){this.recognition.stop()}}]),e}();e.exports=window.Newsha=s},"./node_modules/similarity/index.js":
/*!******************************************!*\
  !*** ./node_modules/similarity/index.js ***!
  \******************************************/
/*! no static exports found */function(e,n,t){var i=t(/*! leven */"./node_modules/leven/index.js");e.exports=function(e,n){if(!(e&&n&&e.length&&n.length))return 0;if(e===n)return 1;var t=i(e.toLowerCase(),n.toLowerCase()),o=Math.max(e.length,n.length);return(o-t)/o}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vY2xpZW50L2J1bmRsZXMvaW5kZXgvY29tcG9uZW50cy9RdWVzdGlvbkJveC5qcyIsIndlYnBhY2s6Ly8vLi9jbGllbnQvYnVuZGxlcy9pbmRleC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbGV2ZW4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL25ld3NoYS9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NpbWlsYXJpdHkvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9uZXdzaGEiLCJRdWVzdGlvbkJveCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJxdWVzdGlvbkJveCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNoYXRCb3giLCJtYWluVGl0bGUiLCJuZXdzaGEiLCJOZXdzaGEiLCJsYW5nIiwiaXNBY3RpdmUiLCJpc1R5cGluZ01vZGUiLCJjYW5UeXBlIiwiaXNUeXBpbmciLCJpbml0TmV3c2hhIiwiaW5pdCIsIl90aGlzIiwiYW55Iiwib25SZXN1bHQiLCJiaW5kIiwiY29tbWFuZCIsInRleHQiLCJlbmFibGVUeXBpbmdNb2RlIiwiX3RoaXMyIiwib25jbGljayIsImxpc3RlbiIsInRvZ2dsZVR5cGluZ01vZGUiLCJkaXNhYmxlVHlwaW5nTW9kZSIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInR5cGUiLCJfdGhpczMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIndvcmRzIiwic3BsaXQiLCJ0aW1lb3V0IiwiX2xvb3AiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzZXRUaW1lb3V0IiwibGVuZ3RoIiwidGhyb3dUZXh0VG9DaGF0Qm94IiwiX3RoaXM0IiwicXVlc3Rpb24iLCJjcmVhdGVFbGVtZW50Iiwib2Zmc2V0VG9wIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0TGVmdCIsImFwcGVuZENoaWxkIiwiX1F1ZXN0aW9uQm94IiwiYXBwIiwiQXBwIiwiYm9keSIsIndpbmRvdyIsIm9ubG9hZCIsIm9uTG9hZCIsImFyciIsImNoYXJDb2RlQ2FjaGUiLCJhIiwiYiIsInN3YXAiLCJhTGVuIiwiYkxlbiIsImNoYXJDb2RlQXQiLCJiQ2hhckNvZGUiLCJyZXQiLCJ0bXAiLCJ0bXAyIiwic3RhcnQiLCJqIiwib2JqIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsIndyaXRhYmxlIiwia2V5IiwiQ29uc3RydWN0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfc2ltaWxhcml0eSIsIl9zaW1pbGFyaXR5MiIsImRlZmF1bHQiLCJTdHJpbmciLCJmYU9wdGltaXplIiwicmVwbGFjZSIsImNvbmZpZyIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiY29tbWFuZHMiLCJjb2xsZWN0aW9ucyIsIm1pbmltdW1Db25maWRlbmNlIiwiYW55TGlzdGVuZXJzIiwicmVjb2duaXRpb24iLCJTcGVlY2hSZWNvZ25pdGlvbiIsIndlYmtpdFNwZWVjaFJlY29nbml0aW9uIiwibW96U3BlZWNoUmVjb2duaXRpb24iLCJtc1NwZWVjaFJlY29nbml0aW9uIiwiY29udGludW91cyIsIm9ucmVzdWx0Iiwib25lbmQiLCJvbkVuZCIsImV2ZW50IiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJfc3RlcCIsIl9pdGVyYXRvciIsInJlc3VsdHMiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwidHJhbnNjcmlwdCIsImVyciIsInJldHVybiIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImxpc3RlbmVyIiwiY2hlY2tSZXN1bHRzIiwiY29uZmlkZW5jZSIsIm9wZW5uaW5nQ29sbGVjdGlvbiIsInRyaW0iLCJpbmRleE9mIiwiY2xvc2luZ0NvbGxlY3Rpb24iLCJjb2xsZWN0aW9uTmFtZSIsInN1YnN0ciIsImNob29zZWRJdGVtIiwiaGlnaGVzdENvbmZpZGVuY2UiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJpdGVtIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQiLCJfZGlkSXRlcmF0b3JFcnJvcjQiLCJfaXRlcmF0b3JFcnJvcjQiLCJfc3RlcDQiLCJfaXRlcmF0b3I0Iiwid29yZCIsIm1heCIsImRhdGEiLCJpc1RydWUiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSIsIl9kaWRJdGVyYXRvckVycm9yNSIsIl9pdGVyYXRvckVycm9yNSIsIl9zdGVwNSIsIl9pdGVyYXRvcjUiLCJfd29yZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242IiwiX2RpZEl0ZXJhdG9yRXJyb3I2IiwiX2l0ZXJhdG9yRXJyb3I2IiwiX3N0ZXA2IiwiX2l0ZXJhdG9yNiIsInJlc3VsdE9iamVjdCIsInNob3VsZFJ1biIsImFuZENvbW1hbmRzIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjciLCJfZGlkSXRlcmF0b3JFcnJvcjciLCJfaXRlcmF0b3JFcnJvcjciLCJfc3RlcDciLCJfaXRlcmF0b3I3IiwiY21kIiwicmVzdWx0IiwiY2hlY2tTaW5nbGVDb21tYW5kIiwiY2FsbGJhY2siLCJmdW5jIiwicHVzaCIsImxpc3QiLCJtaWRkbGV3YXJlIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjgiLCJfZGlkSXRlcmF0b3JFcnJvcjgiLCJfaXRlcmF0b3JFcnJvcjgiLCJfc3RlcDgiLCJfaXRlcmF0b3I4Iiwic3RvcCIsImRpc3RhbmNlIiwidG9Mb3dlckNhc2UiLCJsb25nZXN0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIs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VEFwQyxFQUFBRCxRQUFBc0YsT0FBQWpEOzs7OzhDQzNVQSxJQUFBbUwsRUFBQTFOLGNBQUEsaUNBRUFHLEVBQUFELFFBQUEsU0FBQTJGLEVBQUFDLEdBQ0EsS0FBQUQsR0FBQUMsR0FBQUQsRUFBQWxCLFFBQUFtQixFQUFBbkIsUUFBQSxTQUNBLEdBQUFrQixJQUFBQyxFQUFBLFNBQ0EsSUFBQXBGLEVBQUFnTixFQUFBN0gsRUFBQThILGNBQUE3SCxFQUFBNkgsZUFDQUMsRUFBQXJKLEtBQUErRyxJQUFBekYsRUFBQWxCLE9BQUFtQixFQUFBbkIsUUFDQSxPQUFBaUosRUFBQWxOLEdBQUFrTiIsImZpbGUiOiIuL2phdmFzY3JpcHRzL2luZGV4LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL2NsaWVudC9idW5kbGVzL2luZGV4L2luZGV4LmpzXCIpO1xuIiwiaW1wb3J0IG5ld3NoYSBmcm9tICduZXdzaGEnXG5cbmNsYXNzIFF1ZXN0aW9uQm94IHtcblxuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgdGhpcy5xdWVzdGlvbkJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWVzdGlvbi1ib3gnKTtcbiAgICAgICAgdGhpcy5jaGF0Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtYm94JylcbiAgICAgICAgdGhpcy5tYWluVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVlc3Rpb24tYm94ID4gLnRpdGxlJylcbiAgICAgICAgdGhpcy5uZXdzaGEgPSBuZXcgTmV3c2hhKHsgbGFuZzogJ2VuJyB9KTtcbiAgICAgICAgdGhpcy5uZXdzaGEuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1R5cGluZ01vZGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jYW5UeXBlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNUeXBpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbml0TmV3c2hhKCk7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIGluaXROZXdzaGEgKCkge1xuICAgICAgICB0aGlzLm5ld3NoYS5hbnkodGhpcy5vblJlc3VsdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5uZXdzaGEuY29tbWFuZCgnYWxpcmV6YScsIHRleHQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVHlwaW5nICYmICF0aGlzLmlzVHlwaW5nTW9kZSAmJiAhdGhpcy5jYW5UeXBlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVUeXBpbmdNb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGluaXQgKCkge1xuICAgICAgICB0aGlzLnF1ZXN0aW9uQm94Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1R5cGluZykgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm5ld3NoYS5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmV3c2hhLmxpc3RlbigpXG4gICAgICAgICAgICAgICAgdGhpcy5uZXdzaGEuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50b2dnbGVUeXBpbmdNb2RlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdG9nZ2xlVHlwaW5nTW9kZSAoKSB7XG4gICAgICAgIHRoaXMuaXNUeXBpbmdNb2RlID8gdGhpcy5kaXNhYmxlVHlwaW5nTW9kZSgpIDogdGhpcy5lbmFibGVUeXBpbmdNb2RlKCk7XG4gICAgfVxuXG4gICAgZW5hYmxlVHlwaW5nTW9kZSAoKSB7XG4gICAgICAgIHRoaXMuaXNUeXBpbmdNb2RlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jYW5UeXBlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5tYWluVGl0bGUuaW5uZXJIVE1MID0gJ1tTYXkgc29tZXRoaW5nXSdcbiAgICAgICAgdGhpcy5xdWVzdGlvbkJveC5jbGFzc0xpc3QuYWRkKCd0eXBpbmctbW9kZScpO1xuICAgIH1cblxuICAgIGRpc2FibGVUeXBpbmdNb2RlICgpIHtcbiAgICAgICAgdGhpcy5pc1R5cGluZ01vZGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jYW5UeXBlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubWFpblRpdGxlLmlubmVySFRNTCA9ICdBc2sgbWUgcXVlc3Rpb25zJztcbiAgICAgICAgdGhpcy5xdWVzdGlvbkJveC5jbGFzc0xpc3QucmVtb3ZlKCd0eXBpbmctbW9kZScpO1xuICAgIH1cblxuICAgIG9uUmVzdWx0ICh0ZXh0KSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5UeXBlKSByZXR1cm47XG4gICAgICAgIHRoaXMudHlwZSh0ZXh0KVxuICAgIH1cblxuICAgIHR5cGUgKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB3b3JkcyA9IHRleHQuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIGxldCB0aW1lb3V0ID0gMDtcbiAgICAgICAgICAgIHRoaXMuY2FuVHlwZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc1R5cGluZyA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHRoaXMubWFpblRpdGxlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIHRpbWVvdXQgKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjAwKSArIDEwMDtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluVGl0bGUuaW5uZXJIVE1MICs9IHdvcmRzW2ldICsgJyAnO1xuICAgICAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1R5cGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMudGhyb3dUZXh0VG9DaGF0Qm94KHRleHQpXG4gICAgICAgICAgICB9LCB0aW1lb3V0ICsgNTAwKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHRocm93VGV4dFRvQ2hhdEJveCAodGV4dCkge1xuICAgICAgICB0aGlzLm1haW5UaXRsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgY29uc3QgcXVlc3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG5cbiAgICAgICAgY29uc3QgdG9wID0gdGhpcy5xdWVzdGlvbkJveC5vZmZzZXRUb3AgLSB0aGlzLmNoYXRCb3gub2Zmc2V0SGVpZ2h0ICsgMjI7XG4gICAgICAgIGNvbnN0IGxlZnQgPSB0aGlzLnF1ZXN0aW9uQm94Lm9mZnNldExlZnQgLSAzMDtcblxuICAgICAgICBxdWVzdGlvbi5jbGFzc0xpc3QuYWRkKCd1c2VyJyk7XG4gICAgICAgIHF1ZXN0aW9uLmlubmVySFRNTCA9IHRleHQ7XG4gICAgICAgIHRoaXMuY2hhdEJveC5hcHBlbmRDaGlsZChxdWVzdGlvbik7XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVUeXBpbmdNb2RlKCk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gUXVlc3Rpb25Cb3g7IiwiaW1wb3J0IFF1ZXN0aW9uQm94IGZyb20gJy4vY29tcG9uZW50cy9RdWVzdGlvbkJveCdcblxuY2xhc3MgQXBwIHtcbiAgICBcbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgIHRoaXMucXVlc3Rpb25Cb3ggPSBuZXcgUXVlc3Rpb25Cb3goKTtcbiAgICB9XG4gICAgXG4gICAgb25Mb2FkICgpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdyZWFkeScpXG4gICAgfVxuXG59XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHBcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiBhcHAub25Mb2FkKCkiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXN0ZWQtdGVybmFyeSAqL1xuJ3VzZSBzdHJpY3QnO1xudmFyIGFyciA9IFtdO1xudmFyIGNoYXJDb2RlQ2FjaGUgPSBbXTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYSwgYikge1xuXHRpZiAoYSA9PT0gYikge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cblx0dmFyIHN3YXAgPSBhO1xuXG5cdC8vIFN3YXBwaW5nIHRoZSBzdHJpbmdzIGlmIGBhYCBpcyBsb25nZXIgdGhhbiBgYmAgc28gd2Uga25vdyB3aGljaCBvbmUgaXMgdGhlXG5cdC8vIHNob3J0ZXN0ICYgd2hpY2ggb25lIGlzIHRoZSBsb25nZXN0XG5cdGlmIChhLmxlbmd0aCA+IGIubGVuZ3RoKSB7XG5cdFx0YSA9IGI7XG5cdFx0YiA9IHN3YXA7XG5cdH1cblxuXHR2YXIgYUxlbiA9IGEubGVuZ3RoO1xuXHR2YXIgYkxlbiA9IGIubGVuZ3RoO1xuXG5cdGlmIChhTGVuID09PSAwKSB7XG5cdFx0cmV0dXJuIGJMZW47XG5cdH1cblxuXHRpZiAoYkxlbiA9PT0gMCkge1xuXHRcdHJldHVybiBhTGVuO1xuXHR9XG5cblx0Ly8gUGVyZm9ybWluZyBzdWZmaXggdHJpbW1pbmc6XG5cdC8vIFdlIGNhbiBsaW5lYXJseSBkcm9wIHN1ZmZpeCBjb21tb24gdG8gYm90aCBzdHJpbmdzIHNpbmNlIHRoZXlcblx0Ly8gZG9uJ3QgaW5jcmVhc2UgZGlzdGFuY2UgYXQgYWxsXG5cdC8vIE5vdGU6IGB+LWAgaXMgdGhlIGJpdHdpc2Ugd2F5IHRvIHBlcmZvcm0gYSBgLSAxYCBvcGVyYXRpb25cblx0d2hpbGUgKGFMZW4gPiAwICYmIChhLmNoYXJDb2RlQXQofi1hTGVuKSA9PT0gYi5jaGFyQ29kZUF0KH4tYkxlbikpKSB7XG5cdFx0YUxlbi0tO1xuXHRcdGJMZW4tLTtcblx0fVxuXG5cdGlmIChhTGVuID09PSAwKSB7XG5cdFx0cmV0dXJuIGJMZW47XG5cdH1cblxuXHQvLyBQZXJmb3JtaW5nIHByZWZpeCB0cmltbWluZ1xuXHQvLyBXZSBjYW4gbGluZWFybHkgZHJvcCBwcmVmaXggY29tbW9uIHRvIGJvdGggc3RyaW5ncyBzaW5jZSB0aGV5XG5cdC8vIGRvbid0IGluY3JlYXNlIGRpc3RhbmNlIGF0IGFsbFxuXHR2YXIgc3RhcnQgPSAwO1xuXG5cdHdoaWxlIChzdGFydCA8IGFMZW4gJiYgKGEuY2hhckNvZGVBdChzdGFydCkgPT09IGIuY2hhckNvZGVBdChzdGFydCkpKSB7XG5cdFx0c3RhcnQrKztcblx0fVxuXG5cdGFMZW4gLT0gc3RhcnQ7XG5cdGJMZW4gLT0gc3RhcnQ7XG5cblx0aWYgKGFMZW4gPT09IDApIHtcblx0XHRyZXR1cm4gYkxlbjtcblx0fVxuXG5cdHZhciBiQ2hhckNvZGU7XG5cdHZhciByZXQ7XG5cdHZhciB0bXA7XG5cdHZhciB0bXAyO1xuXHR2YXIgaSA9IDA7XG5cdHZhciBqID0gMDtcblxuXHR3aGlsZSAoaSA8IGFMZW4pIHtcblx0XHRjaGFyQ29kZUNhY2hlW3N0YXJ0ICsgaV0gPSBhLmNoYXJDb2RlQXQoc3RhcnQgKyBpKTtcblx0XHRhcnJbaV0gPSArK2k7XG5cdH1cblxuXHR3aGlsZSAoaiA8IGJMZW4pIHtcblx0XHRiQ2hhckNvZGUgPSBiLmNoYXJDb2RlQXQoc3RhcnQgKyBqKTtcblx0XHR0bXAgPSBqKys7XG5cdFx0cmV0ID0gajtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBhTGVuOyBpKyspIHtcblx0XHRcdHRtcDIgPSBiQ2hhckNvZGUgPT09IGNoYXJDb2RlQ2FjaGVbc3RhcnQgKyBpXSA/IHRtcCA6IHRtcCArIDE7XG5cdFx0XHR0bXAgPSBhcnJbaV07XG5cdFx0XHRyZXQgPSBhcnJbaV0gPSB0bXAgPiByZXQgPyB0bXAyID4gcmV0ID8gcmV0ICsgMSA6IHRtcDIgOiB0bXAyID4gdG1wID8gdG1wICsgMSA6IHRtcDI7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfc2ltaWxhcml0eSA9IHJlcXVpcmUoJ3NpbWlsYXJpdHknKTtcblxudmFyIF9zaW1pbGFyaXR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpbWlsYXJpdHkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5TdHJpbmcucHJvdG90eXBlLmZhT3B0aW1pemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVwbGFjZSgv2LUvZywgJ9izJykucmVwbGFjZSgv2KsvZywgJ9izJykucmVwbGFjZSgv2LgvZywgJ9iyJykucmVwbGFjZSgv2LAvZywgJ9iyJykucmVwbGFjZSgv2LYvZywgJ9iyJykucmVwbGFjZSgv2LcvZywgJ9iqJykucmVwbGFjZSgv2K0vZywgJ9mHJykucmVwbGFjZSgv2LovZywgJ9mCJyk7XG59O1xuXG52YXIgTmV3c2hhID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5ld3NoYSgpIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5ld3NoYSk7XG5cbiAgICAgICAgdGhpcy5jb21tYW5kcyA9IFtdO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25zID0ge307XG4gICAgICAgIHRoaXMubWluaW11bUNvbmZpZGVuY2UgPSAwLjQ7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmFueUxpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLnJlY29nbml0aW9uID0gbmV3ICh3aW5kb3cuU3BlZWNoUmVjb2duaXRpb24gfHwgd2luZG93LndlYmtpdFNwZWVjaFJlY29nbml0aW9uIHx8IHdpbmRvdy5tb3pTcGVlY2hSZWNvZ25pdGlvbiB8fCB3aW5kb3cubXNTcGVlY2hSZWNvZ25pdGlvbikoKTtcbiAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5sYW5nID0gY29uZmlnLmxhbmcgfHwgJ2ZhJztcbiAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5jb250aW51b3VzID0gY29uZmlnLmNvbnRpbnVvdXMgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMucmVjb2duaXRpb24ub25yZXN1bHQgPSB0aGlzLm9uUmVzdWx0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVjb2duaXRpb24ub25lbmQgPSB0aGlzLm9uRW5kLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKE5ld3NoYSwgW3tcbiAgICAgICAga2V5OiAnb25SZXN1bHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXN1bHQoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciByZXQgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gZXZlbnQucmVzdWx0c1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByZXQgKz0gcmVzdWx0WzBdLnRyYW5zY3JpcHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IHRoaXMuYW55TGlzdGVuZXJzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF9zdGVwMi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIocmV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jaGVja1Jlc3VsdHMocmV0KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnb25FbmQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25FbmQoKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbigpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjaGVja1NpbmdsZUNvbW1hbmQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tTaW5nbGVDb21tYW5kKGNvbW1hbmQsIHRleHQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQgPSBjb21tYW5kLnRyaW0oKTtcbiAgICAgICAgICAgIHZhciBjb25maWRlbmNlID0gMDtcbiAgICAgICAgICAgIHZhciBvcGVubmluZ0NvbGxlY3Rpb24gPSBjb21tYW5kLmluZGV4T2YoJ3snKTtcbiAgICAgICAgICAgIGlmIChvcGVubmluZ0NvbGxlY3Rpb24gIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsb3NpbmdDb2xsZWN0aW9uID0gY29tbWFuZC5pbmRleE9mKCd9Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25OYW1lID0gY29tbWFuZC5zdWJzdHIob3Blbm5pbmdDb2xsZWN0aW9uICsgMSwgY2xvc2luZ0NvbGxlY3Rpb24gLSBvcGVubmluZ0NvbGxlY3Rpb24gLSAxKTtcbiAgICAgICAgICAgICAgICB2YXIgY2hvb3NlZEl0ZW0gPSBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBoaWdoZXN0Q29uZmlkZW5jZSA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMyA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSB0aGlzLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25OYW1lXVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IChfc3RlcDMgPSBfaXRlcmF0b3IzLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZGVuY2UgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IHRleHQuc3BsaXQoJyAnKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IChfc3RlcDQgPSBfaXRlcmF0b3I0Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd29yZCA9IF9zdGVwNC52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWRlbmNlID0gTWF0aC5tYXgoKDAsIF9zaW1pbGFyaXR5Mi5kZWZhdWx0KSh3b3JkLmZhT3B0aW1pemUoKSwgaXRlbS5uYW1lLmZhT3B0aW1pemUoKSksIGNvbmZpZGVuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yNCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3I0ID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ICYmIF9pdGVyYXRvcjQucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I0LnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGlnaGVzdENvbmZpZGVuY2UgPCBjb25maWRlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGVzdENvbmZpZGVuY2UgPSBjb25maWRlbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob29zZWRJdGVtID0gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjMgPSBlcnI7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgJiYgX2l0ZXJhdG9yMy5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25OYW1lOiBjb2xsZWN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY2hvb3NlZEl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZGVuY2U6IGhpZ2hlc3RDb25maWRlbmNlLFxuICAgICAgICAgICAgICAgICAgICBpc1RydWU6IGhpZ2hlc3RDb25maWRlbmNlID49IHRoaXMubWluaW11bUNvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjUgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNSA9IHRleHQuc3BsaXQoJyAnKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNTsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IChfc3RlcDUgPSBfaXRlcmF0b3I1Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3dvcmQgPSBfc3RlcDUudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uZmlkZW5jZSA9IE1hdGgubWF4KCgwLCBfc2ltaWxhcml0eTIuZGVmYXVsdCkoX3dvcmQuZmFPcHRpbWl6ZSgpLCBjb21tYW5kLmZhT3B0aW1pemUoKSksIGNvbmZpZGVuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yNSA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3I1ID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ICYmIF9pdGVyYXRvcjUucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I1LnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I1O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNvbmZpZGVuY2U6IGNvbmZpZGVuY2UsXG4gICAgICAgICAgICAgICAgaXNUcnVlOiBjb25maWRlbmNlID49IHRoaXMubWluaW11bUNvbmZpZGVuY2VcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NoZWNrUmVzdWx0cycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja1Jlc3VsdHModGV4dCkge1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjYgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjYgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNiA9IHRoaXMuY29tbWFuZHNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDY7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYgPSAoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1hbmQgPSBfc3RlcDYudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdE9iamVjdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IGNvbW1hbmQuY29tbWFuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQ6IHRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uczoge31cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3VsZFJ1biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25maWRlbmNlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuZENvbW1hbmRzID0gY29tbWFuZC5jb21tYW5kLnNwbGl0KCcmJicpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I3ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjcgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjcgPSBhbmRDb21tYW5kc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNyA9IChfc3RlcDcgPSBfaXRlcmF0b3I3Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb243ID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbWQgPSBfc3RlcDcudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5jaGVja1NpbmdsZUNvbW1hbmQoY21kLCB0ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRSdW4gPSBzaG91bGRSdW4gJiYgcmVzdWx0LmlzVHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWRlbmNlICs9IHJlc3VsdC5jb25maWRlbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRPYmplY3QuY29sbGVjdGlvbnNbcmVzdWx0LmNvbGxlY3Rpb25OYW1lXSA9IHJlc3VsdC5kYXRhLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3I3ID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb243ICYmIF9pdGVyYXRvcjcucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjcucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25maWRlbmNlIC89IGFuZENvbW1hbmRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0T2JqZWN0LmNvbmZpZGVuY2UgPSBjb25maWRlbmNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRSdW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2socmVzdWx0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yNiA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3I2ID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242ICYmIF9pdGVyYXRvcjYucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I2LnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I2O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjb21tYW5kJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbW1hbmQoY21kLCBmdW5jKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IGNtZCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvbGxlY3Rpb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29sbGVjdGlvbihuYW1lLCBsaXN0KSB7XG4gICAgICAgICAgICB2YXIgbWlkZGxld2FyZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbnNbbmFtZV0gPSBbXTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uOCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I4ID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3I4ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjggPSBsaXN0W1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA4OyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb244ID0gKF9zdGVwOCA9IF9pdGVyYXRvcjgubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjggPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXA4LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25zW25hbWVdLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBtaWRkbGV3YXJlKGl0ZW0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yOCA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3I4ID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb244ICYmIF9pdGVyYXRvcjgucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I4LnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xsZWN0aW9uc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYW55JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFueShmdW5jKSB7XG4gICAgICAgICAgICB0aGlzLmFueUxpc3RlbmVycy5wdXNoKGZ1bmMpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdsaXN0ZW4nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbGlzdGVuKCkge1xuICAgICAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzdG9wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgICAgICB0aGlzLnJlY29nbml0aW9uLnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBOZXdzaGE7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gd2luZG93Lk5ld3NoYSA9IE5ld3NoYTsiLCJ2YXIgZGlzdGFuY2UgPSByZXF1aXJlKFwibGV2ZW5cIilcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhLGIpIHtcbiAgaWYgKCFhIHx8ICFiIHx8ICFhLmxlbmd0aCB8fCAhYi5sZW5ndGgpIHJldHVybiAwXG4gIGlmIChhID09PSBiKSByZXR1cm4gMVxuICB2YXIgZCA9IGRpc3RhbmNlKGEudG9Mb3dlckNhc2UoKSxiLnRvTG93ZXJDYXNlKCkpXG4gIHZhciBsb25nZXN0ID0gTWF0aC5tYXgoYS5sZW5ndGgsIGIubGVuZ3RoKVxuICByZXR1cm4gKGxvbmdlc3QtZCkvbG9uZ2VzdFxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==